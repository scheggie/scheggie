const mocha = require('mocha');
const should = require('should');
const db = require('./dbTestUtils.js');

const sampleData = {
  "users": [
    {"_id" : "59935f7210f4eec889a1039f", "favRecipes": {"null" : "null"}, "facebookId" : "10155254108838780", "name" : "John Doe", "email" : "JohnD@gmail.com", "week_two" : [ null, null, null, null, null, null, null ], "week_one" : [ null, null, null, null, null, null, null ], "__v" : 0 },
    {"_id" : "64935f7210f4eec889a1039f", "favRecipes": {"null" : "null"}, "facebookId" : "10155256408838780", "name" : "Joe Schmoe", "email" : "JoeS@gmail.com", "week_two" : [ null, null, null, null, null, null, null ], "week_one" : [ null, null, null, null, null, null, null ], "__v" : 0 }
  ],
  "recipes": [
    {"_id":"59927f1c8171ce86b62be4fb","fullData":{"yield":null,"nutritionEstimates":[{"attribute":"FAT_KCAL","description":null,"value":80,"unit":{"id":"fea252f8-9888-4365-b005-e2c63ed3a776","name":"calorie","abbreviation":"kcal","plural":"calories","pluralAbbreviation":"kcal","decimal":true}},{"attribute":"K","description":"Potassium, K","value":0.71,"unit":{"id":"12485d26-6e69-102c-9a8a-0030485841f8","name":"gram","abbreviation":"g","plural":"grams","pluralAbbreviation":"grams","decimal":true}},{"attribute":"FLD","description":"Fluoride, F","value":0,"unit":{"id":"12485d26-6e69-102c-9a8a-0030485841f8","name":"gram","abbreviation":"g","plural":"grams","pluralAbbreviation":"grams","decimal":true}},{"attribute":"PHYSTR","description":"Phytosterols","value":0,"unit":{"id":"12485d26-6e69-102c-9a8a-0030485841f8","name":"gram","abbreviation":"g","plural":"grams","pluralAbbreviation":"grams","decimal":true}},{"attribute":"VAL_G","description":"Valine","value":0.57,"unit":{"id":"12485d26-6e69-102c-9a8a-0030485841f8","name":"gram","abbreviation":"g","plural":"grams","pluralAbbreviation":"grams","decimal":true}},{"attribute":"SITSTR","description":"Beta-sitosterol","value":0.04,"unit":{"id":"12485d26-6e69-102c-9a8a-0030485841f8","name":"gram","abbreviation":"g","plural":"grams","pluralAbbreviation":"grams","decimal":true}},{"attribute":"FASAT","description":"Fatty acids, total saturated","value":1.01,"unit":{"id":"12485d26-6e69-102c-9a8a-0030485841f8","name":"gram","abbreviation":"g","plural":"grams","pluralAbbreviation":"grams","decimal":true}},{"attribute":"STARCH","description":"Starch","value":35.51,"unit":{"id":"12485d26-6e69-102c-9a8a-0030485841f8","name":"gram","abbreviation":"g","plural":"grams","pluralAbbreviation":"grams","decimal":true}},{"attribute":"FOLDFE","description":"Folate, DFE","value":308.98,"unit":{"id":"4d783ee4-aa07-4958-84bf-3f4b528049dc","name":"mcg_DFE","abbreviation":"mcg_DFE","plural":"mcg_DFE","pluralAbbreviation":"mcg_DFE","decimal":false}},{"attribute":"THIA","description":"Thiamin","value":0,"unit":{"id":"12485d26-6e69-102c-9a8a-0030485841f8","name":"gram","abbreviation":"g","plural":"grams","pluralAbbreviation":"grams","decimal":true}},{"attribute":"MN","description":"Manganese, Mn","value":0,"unit":{"id":"12485d26-6e69-102c-9a8a-0030485841f8","name":"gram","abbreviation":"g","plural":"grams","pluralAbbreviation":"grams","decimal":true}},{"attribute":"GALS","description":"Galactose","value":0.09,"unit":{"id":"12485d26-6e69-102c-9a8a-0030485841f8","name":"gram","abbreviation":"g","plural":"grams","pluralAbbreviation":"grams","decimal":true}},{"attribute":"GLUS","description":"Glucose (dextrose)","value":0.45,"unit":{"id":"12485d26-6e69-102c-9a8a-0030485841f8","name":"gram","abbreviation":"g","plural":"grams","pluralAbbreviation":"grams","decimal":true}},{"attribute":"ARG_G","description":"Arginine","value":0.02,"unit":{"id":"12485d26-6e69-102c-9a8a-0030485841f8","name":"gram","abbreviation":"g","plural":"grams","pluralAbbreviation":"grams","decimal":true}},{"attribute":"F16D1","description":"16:1 undifferentiated","value":0.5,"unit":{"id":"12485d26-6e69-102c-9a8a-0030485841f8","name":"gram","abbreviation":"g","plural":"grams","pluralAbbreviation":"grams","decimal":true}},{"attribute":"FOLFD","description":"Folate, food","value":0,"unit":{"id":"12485d26-6e69-102c-9a8a-0030485841f8","name":"gram","abbreviation":"g","plural":"grams","pluralAbbreviation":"grams","decimal":true}},{"attribute":"FE","description":"Iron, Fe","value":0,"unit":{"id":"12485d26-6e69-102c-9a8a-0030485841f8","name":"gram","abbreviation":"g","plural":"grams","pluralAbbreviation":"grams","decimal":true}},{"attribute":"ENERC_KJ","description":"Energy","value":1510.54,"unit":{"id":"fea252f8-9888-4365-b005-e2c63ed3a776","name":"calorie","abbreviation":"kcal","plural":"calories","pluralAbbreviation":"kcal","decimal":true}},{"attribute":"VITB6A","description":"Vitamin B-6","value":0,"unit":{"id":"12485d26-6e69-102c-9a8a-0030485841f8","name":"gram","abbreviation":"g","plural":"grams","pluralAbbreviation":"grams","decimal":true}},{"attribute":"ASP_G","description":"Aspartic acid","value":0.57,"unit":{"id":"12485d26-6e69-102c-9a8a-0030485841f8","name":"gram","abbreviation":"g","plural":"grams","pluralAbbreviation":"grams","decimal":true}},{"attribute":"FRUS","description":"Fructose","value":0.45,"unit":{"id":"12485d26-6e69-102c-9a8a-0030485841f8","name":"gram","abbreviation":"g","plural":"grams","pluralAbbreviation":"grams","decimal":true}},{"attribute":"TOCPHA","description":"Vitamin E (alpha-tocopherol)","value":0,"unit":{"id":"12485d26-6e69-102c-9a8a-0030485841f8","name":"gram","abbreviation":"g","plural":"grams","pluralAbbreviation":"grams","decimal":true}},{"attribute":"WATER","description":"Water","value":140.95,"unit":{"id":"12485d26-6e69-102c-9a8a-0030485841f8","name":"gram","abbreviation":"g","plural":"grams","pluralAbbreviation":"grams","decimal":true}},{"attribute":"SUGAR","description":"Sugars, total","value":6.51,"unit":{"id":"12485d26-6e69-102c-9a8a-0030485841f8","name":"gram","abbreviation":"g","plural":"grams","pluralAbbreviation":"grams","decimal":true}},{"attribute":"FAMS","description":"Fatty acids, total monounsaturated","value":5.03,"unit":{"id":"12485d26-6e69-102c-9a8a-0030485841f8","name":"gram","abbreviation":"g","plural":"grams","pluralAbbreviation":"grams","decimal":true}},{"attribute":"ASH","description":"Ash","value":2.73,"unit":{"id":"12485d26-6e69-102c-9a8a-0030485841f8","name":"gram","abbreviation":"g","plural":"grams","pluralAbbreviation":"grams","decimal":true}},{"attribute":"SE","description":"Selenium, Se","value":0,"unit":{"id":"12485d26-6e69-102c-9a8a-0030485841f8","name":"gram","abbreviation":"g","plural":"grams","pluralAbbreviation":"grams","decimal":true}},{"attribute":"FIBTG","description":"Fiber, total dietary","value":8.43,"unit":{"id":"12485d26-6e69-102c-9a8a-0030485841f8","name":"gram","abbreviation":"g","plural":"grams","pluralAbbreviation":"grams","decimal":true}},{"attribute":"PROCNT","description":"Protein","value":11.64,"unit":{"id":"12485d26-6e69-102c-9a8a-0030485841f8","name":"gram","abbreviation":"g","plural":"grams","pluralAbbreviation":"grams","decimal":true}},{"attribute":"PHE_G","description":"Phenylalanine","value":0.57,"unit":{"id":"12485d26-6e69-102c-9a8a-0030485841f8","name":"gram","abbreviation":"g","plural":"grams","pluralAbbreviation":"grams","decimal":true}},{"attribute":"CHOCDF","description":"Carbohydrate, by difference","value":61.79,"unit":{"id":"12485d26-6e69-102c-9a8a-0030485841f8","name":"gram","abbreviation":"g","plural":"grams","pluralAbbreviation":"grams","decimal":true}},{"attribute":"FOL","description":"Folate, total","value":0,"unit":{"id":"12485d26-6e69-102c-9a8a-0030485841f8","name":"gram","abbreviation":"g","plural":"grams","pluralAbbreviation":"grams","decimal":true}},{"attribute":"VITK","description":"Vitamin K (phylloquinone)","value":0,"unit":{"id":"12485d26-6e69-102c-9a8a-0030485841f8","name":"gram","abbreviation":"g","plural":"grams","pluralAbbreviation":"grams","decimal":true}},{"attribute":"LEU_G","description":"Leucine","value":0.57,"unit":{"id":"12485d26-6e69-102c-9a8a-0030485841f8","name":"gram","abbreviation":"g","plural":"grams","pluralAbbreviation":"grams","decimal":true}},{"attribute":"LYCPN","description":"Lycopene","value":0,"unit":{"id":"12485d26-6e69-102c-9a8a-0030485841f8","name":"gram","abbreviation":"g","plural":"grams","pluralAbbreviation":"grams","decimal":true}},{"attribute":"LUT+ZEA","description":"Lutein + zeaxanthin","value":0,"unit":{"id":"12485d26-6e69-102c-9a8a-0030485841f8","name":"gram","abbreviation":"g","plural":"grams","pluralAbbreviation":"grams","decimal":true}},{"attribute":"CARTA","description":"Carotene, alpha","value":0,"unit":{"id":"12485d26-6e69-102c-9a8a-0030485841f8","name":"gram","abbreviation":"g","plural":"grams","pluralAbbreviation":"grams","decimal":true}},{"attribute":"STID7","description":"Stigmasterol","value":0,"unit":{"id":"12485d26-6e69-102c-9a8a-0030485841f8","name":"gram","abbreviation":"g","plural":"grams","pluralAbbreviation":"grams","decimal":true}},{"attribute":"TOCPHG","description":"Tocopherol, gamma","value":0,"unit":{"id":"12485d26-6e69-102c-9a8a-0030485841f8","name":"gram","abbreviation":"g","plural":"grams","pluralAbbreviation":"grams","decimal":true}},{"attribute":"P","description":"Phosphorus, P","value":0.21,"unit":{"id":"12485d26-6e69-102c-9a8a-0030485841f8","name":"gram","abbreviation":"g","plural":"grams","pluralAbbreviation":"grams","decimal":true}},{"attribute":"PANTAC","description":"Pantothenic acid","value":0,"unit":{"id":"12485d26-6e69-102c-9a8a-0030485841f8","name":"gram","abbreviation":"g","plural":"grams","pluralAbbreviation":"grams","decimal":true}},{"attribute":"CHOLN","description":"Choline, total","value":0.03,"unit":{"id":"12485d26-6e69-102c-9a8a-0030485841f8","name":"gram","abbreviation":"g","plural":"grams","pluralAbbreviation":"grams","decimal":true}},{"attribute":"CA","description":"Calcium, Ca","value":0.06,"unit":{"id":"12485d26-6e69-102c-9a8a-0030485841f8","name":"gram","abbreviation":"g","plural":"grams","pluralAbbreviation":"grams","decimal":true}},{"attribute":"MG","description":"Magnesium, Mg","value":0.07,"unit":{"id":"12485d26-6e69-102c-9a8a-0030485841f8","name":"gram","abbreviation":"g","plural":"grams","pluralAbbreviation":"grams","decimal":true}},{"attribute":"CAMD5","description":"Campesterol","value":0,"unit":{"id":"12485d26-6e69-102c-9a8a-0030485841f8","name":"gram","abbreviation":"g","plural":"grams","pluralAbbreviation":"grams","decimal":true}},{"attribute":"FAPU","description":"Fatty acids, total polyunsaturated","value":1.57,"unit":{"id":"12485d26-6e69-102c-9a8a-0030485841f8","name":"gram","abbreviation":"g","plural":"grams","pluralAbbreviation":"grams","decimal":true}},{"attribute":"VITA_RAE","description":"Vitamin A, RAE","value":340.32,"unit":{"id":"0fcf76b3-891a-403d-883f-58c8809ef151","name":"mcg_RAE","abbreviation":"mcg_RAE","plural":"mcg_RAE","pluralAbbreviation":"mcg_RAE","decimal":false}},{"attribute":"NIA","description":"Niacin","value":0.01,"unit":{"id":"12485d26-6e69-102c-9a8a-0030485841f8","name":"gram","abbreviation":"g","plural":"grams","pluralAbbreviation":"grams","decimal":true}},{"attribute":"CRYPX","description":"Cryptoxanthin, beta","value":0,"unit":{"id":"12485d26-6e69-102c-9a8a-0030485841f8","name":"gram","abbreviation":"g","plural":"grams","pluralAbbreviation":"grams","decimal":true}},{"attribute":"GLU_G","description":"Glutamic acid","value":3.49,"unit":{"id":"12485d26-6e69-102c-9a8a-0030485841f8","name":"gram","abbreviation":"g","plural":"grams","pluralAbbreviation":"grams","decimal":true}},{"attribute":"F16D0","description":"16:0","value":1.01,"unit":{"id":"12485d26-6e69-102c-9a8a-0030485841f8","name":"gram","abbreviation":"g","plural":"grams","pluralAbbreviation":"grams","decimal":true}},{"attribute":"F18D1","description":"18:1 undifferentiated","value":4.53,"unit":{"id":"12485d26-6e69-102c-9a8a-0030485841f8","name":"gram","abbreviation":"g","plural":"grams","pluralAbbreviation":"grams","decimal":true}},{"attribute":"F18D2","description":"18:2 undifferentiated","value":1.57,"unit":{"id":"12485d26-6e69-102c-9a8a-0030485841f8","name":"gram","abbreviation":"g","plural":"grams","pluralAbbreviation":"grams","decimal":true}},{"attribute":"BETN","description":"Betaine","value":0.08,"unit":{"id":"12485d26-6e69-102c-9a8a-0030485841f8","name":"gram","abbreviation":"g","plural":"grams","pluralAbbreviation":"grams","decimal":true}},{"attribute":"FOLAC","description":"Folic acid","value":0,"unit":{"id":"12485d26-6e69-102c-9a8a-0030485841f8","name":"gram","abbreviation":"g","plural":"grams","pluralAbbreviation":"grams","decimal":true}},{"attribute":"SUCS","description":"Sucrose","value":3.25,"unit":{"id":"12485d26-6e69-102c-9a8a-0030485841f8","name":"gram","abbreviation":"g","plural":"grams","pluralAbbreviation":"grams","decimal":true}},{"attribute":"CARTB","description":"Carotene, beta","value":0,"unit":{"id":"12485d26-6e69-102c-9a8a-0030485841f8","name":"gram","abbreviation":"g","plural":"grams","pluralAbbreviation":"grams","decimal":true}},{"attribute":"SER_G","description":"Serine","value":0.57,"unit":{"id":"12485d26-6e69-102c-9a8a-0030485841f8","name":"gram","abbreviation":"g","plural":"grams","pluralAbbreviation":"grams","decimal":true}},{"attribute":"ILE_G","description":"Isoleucine","value":0.57,"unit":{"id":"12485d26-6e69-102c-9a8a-0030485841f8","name":"gram","abbreviation":"g","plural":"grams","pluralAbbreviation":"grams","decimal":true}},{"attribute":"VITA_IU","description":"Vitamin A, IU","value":6811.47,"unit":{"id":"ed46fe0c-44fe-4c1f-b3a8-880f92e30930","name":"IU","abbreviation":"IU","plural":"IU","pluralAbbreviation":"IU","decimal":true}},{"attribute":"ENERC_KCAL","description":"Energy","value":360.66,"unit":{"id":"fea252f8-9888-4365-b005-e2c63ed3a776","name":"calorie","abbreviation":"kcal","plural":"calories","pluralAbbreviation":"kcal","decimal":true}},{"attribute":"VITC","description":"Vitamin C, total ascorbic acid","value":0.03,"unit":{"id":"12485d26-6e69-102c-9a8a-0030485841f8","name":"gram","abbreviation":"g","plural":"grams","pluralAbbreviation":"grams","decimal":true}},{"attribute":"FAT","description":"Total lipid (fat)","value":8.69,"unit":{"id":"12485d26-6e69-102c-9a8a-0030485841f8","name":"gram","abbreviation":"g","plural":"grams","pluralAbbreviation":"grams","decimal":true}},{"attribute":"PRO_G","description":"Proline","value":1.13,"unit":{"id":"12485d26-6e69-102c-9a8a-0030485841f8","name":"gram","abbreviation":"g","plural":"grams","pluralAbbreviation":"grams","decimal":true}},{"attribute":"ZN","description":"Zinc, Zn","value":0,"unit":{"id":"12485d26-6e69-102c-9a8a-0030485841f8","name":"gram","abbreviation":"g","plural":"grams","pluralAbbreviation":"grams","decimal":true}},{"attribute":"MALS","description":"Maltose","value":1.13,"unit":{"id":"12485d26-6e69-102c-9a8a-0030485841f8","name":"gram","abbreviation":"g","plural":"grams","pluralAbbreviation":"grams","decimal":true}},{"attribute":"NA","description":"Sodium, Na","value":0.04,"unit":{"id":"12485d26-6e69-102c-9a8a-0030485841f8","name":"gram","abbreviation":"g","plural":"grams","pluralAbbreviation":"grams","decimal":true}}],"totalTime":"30 min","images":[{"hostedSmallUrl":"https://lh3.googleusercontent.com/I1B12iW0P4Qxr1v5OvDnqvrRxkOnBW57p_zWvQvHdXArqzvsHuJW_7e9hP8BPr2B0sskhzaLJEC_Yawz9yjoVQ=s90","hostedMediumUrl":"https://lh3.googleusercontent.com/I1B12iW0P4Qxr1v5OvDnqvrRxkOnBW57p_zWvQvHdXArqzvsHuJW_7e9hP8BPr2B0sskhzaLJEC_Yawz9yjoVQ=s180","hostedLargeUrl":"https://lh3.googleusercontent.com/I1B12iW0P4Qxr1v5OvDnqvrRxkOnBW57p_zWvQvHdXArqzvsHuJW_7e9hP8BPr2B0sskhzaLJEC_Yawz9yjoVQ=s360","imageUrlsBySize":{"90":"https://lh3.googleusercontent.com/jlqSiYx9O5Z-4H-GwfgWUG6sCydnL_LPBUHE1dCufaebPmWfg30QIoUxAZNlOPqbuJeTzciLfkAugmyHVBlc=s90-c","360":"https://lh3.googleusercontent.com/jlqSiYx9O5Z-4H-GwfgWUG6sCydnL_LPBUHE1dCufaebPmWfg30QIoUxAZNlOPqbuJeTzciLfkAugmyHVBlc=s360-c"}}],"name":"Creamy Avocado Macaroni Salad","source":{"sourceDisplayName":"One Hungry Bunny","sourceSiteUrl":"onehungrybunny.com","sourceRecipeUrl":"http://onehungrybunny.com/creamy-avocado-macaroni-salad/"},"id":"Creamy-Avocado-Macaroni-Salad-2162955","ingredientLines":["8 ounces macaroni pasta, uncooked","2 celery stalks (about 1 cup), finely chopped","2 large carrots, peeled and finely chopped","1 cup green peas, thawed if frozen","1 scallion, sliced","1/4 cup fresh dill, chopped","2 cloves garlic, peeled","1 small shallot, peeled and largely chopped","1 medium avocado, peeled","1 tablespoon lemon juice"],"attribution":{"html":"<a href='http://www.yummly.co/recipe/Creamy-Avocado-Macaroni-Salad-2162955'>Creamy Avocado Macaroni Salad recipe</a> information powered by <img alt='Yummly' src='https://static.yummly.co/api-logo.png'/>","url":"http://www.yummly.co/recipe/Creamy-Avocado-Macaroni-Salad-2162955","text":"Creamy Avocado Macaroni Salad recipes: information powered by Yummly","logo":"https://static.yummly.co/api-logo.png"},"numberOfServings":4,"totalTimeInSeconds":1800,"attributes":{"course":["Salads"]},"flavors":{"Piquant":0,"Meaty":0.1667,"Bitter":0.5,"Sweet":0.3333,"Sour":0.8333,"Salty":0.1667},"rating":4},"abridgedData":{"imageUrlsBySize":{"90":"https://lh3.googleusercontent.com/jlqSiYx9O5Z-4H-GwfgWUG6sCydnL_LPBUHE1dCufaebPmWfg30QIoUxAZNlOPqbuJeTzciLfkAugmyHVBlc=s90-c"},"sourceDisplayName":"One Hungry Bunny","ingredients":["pasta","celery ribs","large carrots","green peas","scallions","fresh dill","garlic","shallots","avocado","lemon juice"],"id":"Creamy-Avocado-Macaroni-Salad-2162955","smallImageUrls":["https://lh3.googleusercontent.com/I1B12iW0P4Qxr1v5OvDnqvrRxkOnBW57p_zWvQvHdXArqzvsHuJW_7e9hP8BPr2B0sskhzaLJEC_Yawz9yjoVQ=s90"],"recipeName":"Creamy Avocado Macaroni Salad","totalTimeInSeconds":1800,"attributes":{"course":["Salads"]},"flavors":{"piquant":0,"meaty":0.16666666666666666,"bitter":0.5,"sweet":0.3333333333333333,"sour":0.8333333333333334,"salty":0.16666666666666666},"rating":4},"rating":4,"fullDataSorter":true,"name":"Creamy-Avocado-Macaroni-Salad-2162955","__v":0},
    {"_id":"59927f1c8171ce86b62be4fd","fullData":{"yield":"serves: 6","nutritionEstimates":[{"attribute":"FAT_KCAL","description":null,"value":50,"unit":{"id":"fea252f8-9888-4365-b005-e2c63ed3a776","name":"calorie","abbreviation":"kcal","plural":"calories","pluralAbbreviation":"kcal","decimal":true}},{"attribute":"K","description":"Potassium, K","value":0.22,"unit":{"id":"12485d26-6e69-102c-9a8a-0030485841f8","name":"gram","abbreviation":"g","plural":"grams","pluralAbbreviation":"grams","decimal":true}},{"attribute":"FLD","description":"Fluoride, F","value":0,"unit":{"id":"12485d26-6e69-102c-9a8a-0030485841f8","name":"gram","abbreviation":"g","plural":"grams","pluralAbbreviation":"grams","decimal":true}},{"attribute":"PHYSTR","description":"Phytosterols","value":0,"unit":{"id":"12485d26-6e69-102c-9a8a-0030485841f8","name":"gram","abbreviation":"g","plural":"grams","pluralAbbreviation":"grams","decimal":true}},{"attribute":"F18D1C","description":"18:1 c","value":1.1,"unit":{"id":"12485d26-6e69-102c-9a8a-0030485841f8","name":"gram","abbreviation":"g","plural":"grams","pluralAbbreviation":"grams","decimal":true}},{"attribute":"F18D2CN6","description":"18:2 n-6 c,c","value":2.5,"unit":{"id":"12485d26-6e69-102c-9a8a-0030485841f8","name":"gram","abbreviation":"g","plural":"grams","pluralAbbreviation":"grams","decimal":true}},{"attribute":"FASAT","description":"Fatty acids, total saturated","value":0.8,"unit":{"id":"12485d26-6e69-102c-9a8a-0030485841f8","name":"gram","abbreviation":"g","plural":"grams","pluralAbbreviation":"grams","decimal":true}},{"attribute":"STARCH","description":"Starch","value":0.2,"unit":{"id":"12485d26-6e69-102c-9a8a-0030485841f8","name":"gram","abbreviation":"g","plural":"grams","pluralAbbreviation":"grams","decimal":true}},{"attribute":"FOLDFE","description":"Folate, DFE","value":33.81,"unit":{"id":"4d783ee4-aa07-4958-84bf-3f4b528049dc","name":"mcg_DFE","abbreviation":"mcg_DFE","plural":"mcg_DFE","pluralAbbreviation":"mcg_DFE","decimal":false}},{"attribute":"GLUS","description":"Glucose (dextrose)","value":1.24,"unit":{"id":"12485d26-6e69-102c-9a8a-0030485841f8","name":"gram","abbreviation":"g","plural":"grams","pluralAbbreviation":"grams","decimal":true}},{"attribute":"FOLFD","description":"Folate, food","value":0,"unit":{"id":"12485d26-6e69-102c-9a8a-0030485841f8","name":"gram","abbreviation":"g","plural":"grams","pluralAbbreviation":"grams","decimal":true}},{"attribute":"FE","description":"Iron, Fe","value":0,"unit":{"id":"12485d26-6e69-102c-9a8a-0030485841f8","name":"gram","abbreviation":"g","plural":"grams","pluralAbbreviation":"grams","decimal":true}},{"attribute":"ENERC_KJ","description":"Energy","value":454.23,"unit":{"id":"fea252f8-9888-4365-b005-e2c63ed3a776","name":"calorie","abbreviation":"kcal","plural":"calories","pluralAbbreviation":"kcal","decimal":true}},{"attribute":"F18D3CN3","description":"18:3 n-3 c,c,c","value":0.3,"unit":{"id":"12485d26-6e69-102c-9a8a-0030485841f8","name":"gram","abbreviation":"g","plural":"grams","pluralAbbreviation":"grams","decimal":true}},{"attribute":"FRUS","description":"Fructose","value":1.05,"unit":{"id":"12485d26-6e69-102c-9a8a-0030485841f8","name":"gram","abbreviation":"g","plural":"grams","pluralAbbreviation":"grams","decimal":true}},{"attribute":"TOCPHA","description":"Vitamin E (alpha-tocopherol)","value":0,"unit":{"id":"12485d26-6e69-102c-9a8a-0030485841f8","name":"gram","abbreviation":"g","plural":"grams","pluralAbbreviation":"grams","decimal":true}},{"attribute":"WATER","description":"Water","value":73.48,"unit":{"id":"12485d26-6e69-102c-9a8a-0030485841f8","name":"gram","abbreviation":"g","plural":"grams","pluralAbbreviation":"grams","decimal":true}},{"attribute":"RETOL","description":"Retinol","value":0,"unit":{"id":"12485d26-6e69-102c-9a8a-0030485841f8","name":"gram","abbreviation":"g","plural":"grams","pluralAbbreviation":"grams","decimal":true}},{"attribute":"SUGAR","description":"Sugars, total","value":3.63,"unit":{"id":"12485d26-6e69-102c-9a8a-0030485841f8","name":"gram","abbreviation":"g","plural":"grams","pluralAbbreviation":"grams","decimal":true}},{"attribute":"FAMS","description":"Fatty acids, total monounsaturated","value":1.1,"unit":{"id":"12485d26-6e69-102c-9a8a-0030485841f8","name":"gram","abbreviation":"g","plural":"grams","pluralAbbreviation":"grams","decimal":true}},{"attribute":"ASH","description":"Ash","value":0.8,"unit":{"id":"12485d26-6e69-102c-9a8a-0030485841f8","name":"gram","abbreviation":"g","plural":"grams","pluralAbbreviation":"grams","decimal":true}},{"attribute":"SE","description":"Selenium, Se","value":0,"unit":{"id":"12485d26-6e69-102c-9a8a-0030485841f8","name":"gram","abbreviation":"g","plural":"grams","pluralAbbreviation":"grams","decimal":true}},{"attribute":"FIBTG","description":"Fiber, total dietary","value":2.32,"unit":{"id":"12485d26-6e69-102c-9a8a-0030485841f8","name":"gram","abbreviation":"g","plural":"grams","pluralAbbreviation":"grams","decimal":true}},{"attribute":"PROCNT","description":"Protein","value":1.94,"unit":{"id":"12485d26-6e69-102c-9a8a-0030485841f8","name":"gram","abbreviation":"g","plural":"grams","pluralAbbreviation":"grams","decimal":true}},{"attribute":"CHOCDF","description":"Carbohydrate, by difference","value":14.95,"unit":{"id":"12485d26-6e69-102c-9a8a-0030485841f8","name":"gram","abbreviation":"g","plural":"grams","pluralAbbreviation":"grams","decimal":true}},{"attribute":"FOL","description":"Folate, total","value":0,"unit":{"id":"12485d26-6e69-102c-9a8a-0030485841f8","name":"gram","abbreviation":"g","plural":"grams","pluralAbbreviation":"grams","decimal":true}},{"attribute":"VITK","description":"Vitamin K (phylloquinone)","value":0,"unit":{"id":"12485d26-6e69-102c-9a8a-0030485841f8","name":"gram","abbreviation":"g","plural":"grams","pluralAbbreviation":"grams","decimal":true}},{"attribute":"F18D0","description":"18:0","value":0.2,"unit":{"id":"12485d26-6e69-102c-9a8a-0030485841f8","name":"gram","abbreviation":"g","plural":"grams","pluralAbbreviation":"grams","decimal":true}},{"attribute":"LUT+ZEA","description":"Lutein + zeaxanthin","value":0,"unit":{"id":"12485d26-6e69-102c-9a8a-0030485841f8","name":"gram","abbreviation":"g","plural":"grams","pluralAbbreviation":"grams","decimal":true}},{"attribute":"CARTA","description":"Carotene, alpha","value":0,"unit":{"id":"12485d26-6e69-102c-9a8a-0030485841f8","name":"gram","abbreviation":"g","plural":"grams","pluralAbbreviation":"grams","decimal":true}},{"attribute":"CHOLE","description":"Cholesterol","value":0,"unit":{"id":"12485d26-6e69-102c-9a8a-0030485841f8","name":"gram","abbreviation":"g","plural":"grams","pluralAbbreviation":"grams","decimal":true}},{"attribute":"STID7","description":"Stigmasterol","value":0,"unit":{"id":"12485d26-6e69-102c-9a8a-0030485841f8","name":"gram","abbreviation":"g","plural":"grams","pluralAbbreviation":"grams","decimal":true}},{"attribute":"TOCPHG","description":"Tocopherol, gamma","value":0,"unit":{"id":"12485d26-6e69-102c-9a8a-0030485841f8","name":"gram","abbreviation":"g","plural":"grams","pluralAbbreviation":"grams","decimal":true}},{"attribute":"P","description":"Phosphorus, P","value":0.07,"unit":{"id":"12485d26-6e69-102c-9a8a-0030485841f8","name":"gram","abbreviation":"g","plural":"grams","pluralAbbreviation":"grams","decimal":true}},{"attribute":"PANTAC","description":"Pantothenic acid","value":0,"unit":{"id":"12485d26-6e69-102c-9a8a-0030485841f8","name":"gram","abbreviation":"g","plural":"grams","pluralAbbreviation":"grams","decimal":true}},{"attribute":"CHOLN","description":"Choline, total","value":0,"unit":{"id":"12485d26-6e69-102c-9a8a-0030485841f8","name":"gram","abbreviation":"g","plural":"grams","pluralAbbreviation":"grams","decimal":true}},{"attribute":"CA","description":"Calcium, Ca","value":0.01,"unit":{"id":"12485d26-6e69-102c-9a8a-0030485841f8","name":"gram","abbreviation":"g","plural":"grams","pluralAbbreviation":"grams","decimal":true}},{"attribute":"MG","description":"Magnesium, Mg","value":0.02,"unit":{"id":"12485d26-6e69-102c-9a8a-0030485841f8","name":"gram","abbreviation":"g","plural":"grams","pluralAbbreviation":"grams","decimal":true}},{"attribute":"CAMD5","description":"Campesterol","value":0,"unit":{"id":"12485d26-6e69-102c-9a8a-0030485841f8","name":"gram","abbreviation":"g","plural":"grams","pluralAbbreviation":"grams","decimal":true}},{"attribute":"FAPU","description":"Fatty acids, total polyunsaturated","value":2.8,"unit":{"id":"12485d26-6e69-102c-9a8a-0030485841f8","name":"gram","abbreviation":"g","plural":"grams","pluralAbbreviation":"grams","decimal":true}},{"attribute":"VITA_RAE","description":"Vitamin A, RAE","value":43.07,"unit":{"id":"0fcf76b3-891a-403d-883f-58c8809ef151","name":"mcg_RAE","abbreviation":"mcg_RAE","plural":"mcg_RAE","pluralAbbreviation":"mcg_RAE","decimal":false}},{"attribute":"NIA","description":"Niacin","value":0,"unit":{"id":"12485d26-6e69-102c-9a8a-0030485841f8","name":"gram","abbreviation":"g","plural":"grams","pluralAbbreviation":"grams","decimal":true}},{"attribute":"CRYPX","description":"Cryptoxanthin, beta","value":0,"unit":{"id":"12485d26-6e69-102c-9a8a-0030485841f8","name":"gram","abbreviation":"g","plural":"grams","pluralAbbreviation":"grams","decimal":true}},{"attribute":"GLU_G","description":"Glutamic acid","value":0.47,"unit":{"id":"12485d26-6e69-102c-9a8a-0030485841f8","name":"gram","abbreviation":"g","plural":"grams","pluralAbbreviation":"grams","decimal":true}},{"attribute":"F16D0","description":"16:0","value":0.5,"unit":{"id":"12485d26-6e69-102c-9a8a-0030485841f8","name":"gram","abbreviation":"g","plural":"grams","pluralAbbreviation":"grams","decimal":true}},{"attribute":"F18D1","description":"18:1 undifferentiated","value":1.1,"unit":{"id":"12485d26-6e69-102c-9a8a-0030485841f8","name":"gram","abbreviation":"g","plural":"grams","pluralAbbreviation":"grams","decimal":true}},{"attribute":"F18D2","description":"18:2 undifferentiated","value":2.5,"unit":{"id":"12485d26-6e69-102c-9a8a-0030485841f8","name":"gram","abbreviation":"g","plural":"grams","pluralAbbreviation":"grams","decimal":true}},{"attribute":"SUCS","description":"Sucrose","value":1.33,"unit":{"id":"12485d26-6e69-102c-9a8a-0030485841f8","name":"gram","abbreviation":"g","plural":"grams","pluralAbbreviation":"grams","decimal":true}},{"attribute":"CARTB","description":"Carotene, beta","value":0,"unit":{"id":"12485d26-6e69-102c-9a8a-0030485841f8","name":"gram","abbreviation":"g","plural":"grams","pluralAbbreviation":"grams","decimal":true}},{"attribute":"F18D3","description":"18:3 undifferentiated","value":0.3,"unit":{"id":"12485d26-6e69-102c-9a8a-0030485841f8","name":"gram","abbreviation":"g","plural":"grams","pluralAbbreviation":"grams","decimal":true}},{"attribute":"VITA_IU","description":"Vitamin A, IU","value":845.74,"unit":{"id":"ed46fe0c-44fe-4c1f-b3a8-880f92e30930","name":"IU","abbreviation":"IU","plural":"IU","pluralAbbreviation":"IU","decimal":true}},{"attribute":"ENERC_KCAL","description":"Energy","value":108.64,"unit":{"id":"fea252f8-9888-4365-b005-e2c63ed3a776","name":"calorie","abbreviation":"kcal","plural":"calories","pluralAbbreviation":"kcal","decimal":true}},{"attribute":"VITC","description":"Vitamin C, total ascorbic acid","value":0.03,"unit":{"id":"12485d26-6e69-102c-9a8a-0030485841f8","name":"gram","abbreviation":"g","plural":"grams","pluralAbbreviation":"grams","decimal":true}},{"attribute":"FAT","description":"Total lipid (fat)","value":5.58,"unit":{"id":"12485d26-6e69-102c-9a8a-0030485841f8","name":"gram","abbreviation":"g","plural":"grams","pluralAbbreviation":"grams","decimal":true}},{"attribute":"VITD-","description":"Vitamin D","value":0.4,"unit":{"id":"ed46fe0c-44fe-4c1f-b3a8-880f92e30930","name":"IU","abbreviation":"IU","plural":"IU","pluralAbbreviation":"IU","decimal":true}},{"attribute":"ZN","description":"Zinc, Zn","value":0,"unit":{"id":"12485d26-6e69-102c-9a8a-0030485841f8","name":"gram","abbreviation":"g","plural":"grams","pluralAbbreviation":"grams","decimal":true}},{"attribute":"NA","description":"Sodium, Na","value":0.09,"unit":{"id":"12485d26-6e69-102c-9a8a-0030485841f8","name":"gram","abbreviation":"g","plural":"grams","pluralAbbreviation":"grams","decimal":true}}],"totalTime":"15 min","images":[{"hostedSmallUrl":"https://lh3.googleusercontent.com/DJvoOfiAGjCsgRC3XaG6LlMjnj8anc9FXFuB4m_K1yH4GmhUuTs07s0Sr_Dt1UQ8cJGxxDUosES6bwzEBmB13uA=s90","hostedMediumUrl":"https://lh3.googleusercontent.com/DJvoOfiAGjCsgRC3XaG6LlMjnj8anc9FXFuB4m_K1yH4GmhUuTs07s0Sr_Dt1UQ8cJGxxDUosES6bwzEBmB13uA=s180","hostedLargeUrl":"https://lh3.googleusercontent.com/DJvoOfiAGjCsgRC3XaG6LlMjnj8anc9FXFuB4m_K1yH4GmhUuTs07s0Sr_Dt1UQ8cJGxxDUosES6bwzEBmB13uA=s360","imageUrlsBySize":{"90":"https://lh3.googleusercontent.com/EwavUIWairtmq9uLGAjgd_vuZoS8EdfTy221rJ8NeTWR4SevAHeRS0IUHq4oPSzou0PpaGNJ2StB_mnR8ydO6Q=s90-c","360":"https://lh3.googleusercontent.com/EwavUIWairtmq9uLGAjgd_vuZoS8EdfTy221rJ8NeTWR4SevAHeRS0IUHq4oPSzou0PpaGNJ2StB_mnR8ydO6Q=s360-c"}}],"name":"Corn Salad","source":{"sourceDisplayName":"Or So She Says","sourceSiteUrl":"oneshetwoshe.com","sourceRecipeUrl":"http://oneshetwoshe.com/2016/06/corn-salad.html"},"id":"Corn-Salad-1693958","ingredientLines":["10 ounces frozen corn","1 small red onion, diced (about 1 cup)","1 red pepper, diced (about 1 cup)","2 Tablespoons fresh parsley, minced","Â¼ cup Ranch dressing."],"attribution":{"html":"<a href='http://www.yummly.co/recipe/Corn-Salad-1693958'>Corn Salad recipe</a> information powered by <img alt='Yummly' src='https://static.yummly.co/api-logo.png'/>","url":"http://www.yummly.co/recipe/Corn-Salad-1693958","text":"Corn Salad recipes: information powered by Yummly","logo":"https://static.yummly.co/api-logo.png"},"numberOfServings":6,"totalTimeInSeconds":900,"attributes":{"course":["Salads"]},"flavors":{"Piquant":0.3333,"Meaty":0.1667,"Bitter":0.1667,"Sweet":0.3333,"Sour":0.8333,"Salty":0.1667},"rating":4},"abridgedData":{"imageUrlsBySize":{"90":"https://lh3.googleusercontent.com/EwavUIWairtmq9uLGAjgd_vuZoS8EdfTy221rJ8NeTWR4SevAHeRS0IUHq4oPSzou0PpaGNJ2StB_mnR8ydO6Q=s90-c"},"sourceDisplayName":"Or So She Says","ingredients":["frozen corn","red onion","red pepper","fresh parsley","ranch dressing"],"id":"Corn-Salad-1693958","smallImageUrls":["https://lh3.googleusercontent.com/DJvoOfiAGjCsgRC3XaG6LlMjnj8anc9FXFuB4m_K1yH4GmhUuTs07s0Sr_Dt1UQ8cJGxxDUosES6bwzEBmB13uA=s90"],"recipeName":"Corn Salad","totalTimeInSeconds":900,"attributes":{"course":["Salads"]},"flavors":{"piquant":0.3333333333333333,"meaty":0.16666666666666666,"bitter":0.16666666666666666,"sweet":0.3333333333333333,"sour":0.8333333333333334,"salty":0.16666666666666666},"rating":4},"rating":4,"fullDataSorter":true,"name":"Corn-Salad-1693958","__v":0}
  ]
};

const User = require('../databases/users.js');
const Recipe = require('../databases/recipes.js');

describe('getUserById', () => {
  before(done => {
    db.connect(done);
  });

  before(done => {
    db.drop(err => {
      if (err) {
        return done(err);
      }
      db.fixtures(sampleData, done);
    })
  });

  it('should return only one user', () => {
    return User.getUserById(10155254108838780).
      then(users => {
        users.should.have.length(1);
      });
  });

  it('should return correct name of user', () => {
    return User.getUserById(10155254108838780).
      then(users=> {
        users[0].name.should.eql('John Doe');
      });
  });
});

describe('Favorite Recipes', () => {
  before(done => {
    db.connect(done);
  });

  before(done => {
    db.drop(err => {
      if (err) {
        return done(err);
      }
      db.fixtures(sampleData, done);
    })
  });

  xit('should save a recipe to a user\'s favorites', () => {
    User.saveRecipeToFavorites(sampleData.users[0], sampleData.recipes[0]);
    return User.getUserById(sampleData.users[0].facebookId).
      then(user => {
        console.log(user);
      })
  });

  xit('should remove a recipe from a user\'s favorites', () => {
    User.saveRecipeToFavorites(sampleData.users[0], sampleData.recipes[0]);
    return User.getUserById(sampleData.users[0].facebookId).
      then(user => {
        Object.keys(user.favRecipes).length.should.eql(1);
      })
  });

});
